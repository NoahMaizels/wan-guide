{"ast":null,"code":"import Cors from 'cors';\nimport initMiddleware from '../../lib/init-middleware';\nimport { promises as fs } from 'fs';\nimport fetch from 'node-fetch'; // Initialize the cors middleware\n\nconst cors = initMiddleware( // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\nCors({\n  // Only allow requests with GET, POST and OPTIONS\n  methods: ['GET', 'POST', 'OPTIONS']\n}));\nfetch('https://www.wanscan.org/api/wan/stakes').then(response => response.json()).then(data => fs.writeFile('./result.json', data)) // .then(result => JSON.stringify(result))\n// .then(text => fs.writeFile('./result.json', text))\n.catch(err => console.log(err));\nexport default async function handler(req, res) {\n  // Run cors\n  await cors(req, res); // Rest of the API logic\n\n  res.json({\n    message: 'Hello Everyone!'\n  });\n}","map":{"version":3,"sources":["/Users/noahmaizels/Desktop/wan-guide/pages/api/cors.js"],"names":["Cors","initMiddleware","promises","fs","fetch","cors","methods","then","response","json","data","writeFile","catch","err","console","log","handler","req","res","message"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,SAASC,QAAQ,IAAIC,EAArB,QAA+B,IAA/B;AACA,OAAOC,KAAP,MAAkB,YAAlB,C,CAGA;;AACA,MAAMC,IAAI,GAAGJ,cAAc,EACzB;AACAD,IAAI,CAAC;AACH;AACAM,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB;AAFN,CAAD,CAFqB,CAA3B;AAQAF,KAAK,CAAC,wCAAD,CAAL,CACCG,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEMG,IAAI,IAAIP,EAAE,CAACQ,SAAH,CAAa,eAAb,EAA8BD,IAA9B,CAFd,EAGA;AACA;AAJA,CAKCE,KALD,CAKOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CALd;AAOA,eAAe,eAAeG,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C;AACA,QAAMb,IAAI,CAACY,GAAD,EAAMC,GAAN,CAAV,CAF8C,CAI9C;;AACAA,EAAAA,GAAG,CAACT,IAAJ,CAAS;AAAEU,IAAAA,OAAO,EAAE;AAAX,GAAT;AACD","sourcesContent":["import Cors from 'cors'\nimport initMiddleware from '../../lib/init-middleware'\nimport { promises as fs } from 'fs'\nimport fetch from 'node-fetch'\n\n\n// Initialize the cors middleware\nconst cors = initMiddleware(\n  // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\n  Cors({\n    // Only allow requests with GET, POST and OPTIONS\n    methods: ['GET', 'POST', 'OPTIONS'],\n  })\n)\n\nfetch('https://www.wanscan.org/api/wan/stakes')\n.then(response => response.json())\n.then(data => fs.writeFile('./result.json', data))\n// .then(result => JSON.stringify(result))\n// .then(text => fs.writeFile('./result.json', text))\n.catch(err => console.log(err))\n\nexport default async function handler(req, res) {\n  // Run cors\n  await cors(req, res)\n\n  // Rest of the API logic\n  res.json({ message: 'Hello Everyone!' })\n}"]},"metadata":{},"sourceType":"module"}